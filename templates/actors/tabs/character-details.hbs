{{#*inline "skill-prof"}}
    <li data-key="{{ @key }}">
        <proficiency-cycle type="skill" name="{{ path }}.value" data-tooltip="{{ hover }}"
                           value="{{#if @root.editable}}{{ baseValue }}{{else}}{{ value }}{{/if}}"
                           aria-label="{{ localize hover }}" {{disabled (not @root.editable)}}></proficiency-cycle>
        {{#if @root.editable}}
        <select name="{{ path }}.ability" class="ability roboto-upper unselect">
            {{ selectOptions @root.config.abilities selected=baseAbility labelAttr="abbreviation" }}
        </select>
        {{else}}
        <div class="ability roboto-upper">{{ abbreviation }}</div>
        {{/if}}
        <a class="name {{ @root.rollableClass }} {{ roll }}">{{ label }}</a>
        <div class="bonus"><span class="sign">{{ sign }}</span>{{ mod }}</div>
        {{#if @root.editable}}
        <a class="config-button" data-action="{{ type }}" data-tooltip="{{ config }}"
           aria-label="{{ localize config }}">
            <i class="fas fa-cog"></i>
        </a>
        {{else if hasPassive}}
        <div class="passive">{{ passive }}</div>
        {{/if}}
    </li>
{{/inline}}

{{#*inline "ability-prof"}}
    <li data-ability="{{ @key }}">
        <proficiency-cycle type="ability" name="{{ path }}.proficient" data-tooltip="{{ hover }}"
                           value="{{#if @root.editable}}{{ baseProf }}{{else}}{{ proficient }}{{/if}}"
                           aria-label="{{ localize hover }}" {{ disabled (not @root.editable) }}></proficiency-cycle>
        <a class="name saving-throw {{ @root.rollableClass }}">{{ abbr }}</a>
        <div class="bonus"><span class="sign">{{ sign }}</span>{{ mod }}</div>
        {{#if @root.editable}}
        <a class="config-button" data-action="ability" data-tooltip="{{ config }}" aria-label="{{ localize config }}">
            <i class="fas fa-cog"></i>
        </a>
        {{/if}}
    </li>
{{/inline}}

<div class="tab details col-2" data-group="primary" data-tab="details">

    {{!-- Skills & Tools --}}
    <div class="left">

        {{!-- Skills --}}
        <filigree-box class="skills">
            <h3>
                <i class="fas fa-briefcase"></i>
                <span class="roboto-upper">{{ localize "DND5E.Skills" }}</span>
            </h3>
            <ul>
                {{#each config.skills}}
                {{#with (lookup @root.skills @key)}}
                    {{> "skill-prof" path=(concat "system.skills." @key) config="DND5E.SkillConfigure"
                        type="skill" hasPassive=true roll="skill-name" }}
                {{/with}}
                {{/each}}
            </ul>
        </filigree-box>

        {{!-- Tools --}}
        <filigree-box class="tools">
            {{#if editable}}
            <a class="trait-selector" data-trait="tool"
               data-tooltip="{{ localize "DND5E.TraitConfig" trait=(localize "DND5E.TraitToolProf") }}"
               aria-label="{{ localize "DND5E.TraitConfig" trait=(localize "DND5E.TraitToolProf") }}">
                <i class="fas fa-cog"></i>
            </a>
            {{/if}}
            <h3>
                <i class="fas fa-hammer"></i>
                <span class="roboto-upper">{{ localize "TYPES.Item.toolPl" }}</span>
            </h3>
            <ul>
                {{#each tools}}
                    {{> "skill-prof" path=(concat "system.tools." @key) config="DND5E.ToolConfigure"
                        type="tool" hasPassive=false roll="tool-name" }}
                {{/each}}
            </ul>
        </filigree-box>

    </div>

    {{!-- Background & Saving Throws --}}
    <div class="right">

        {{!-- Background --}}
        <div class="pills-lg">
            {{#with creatureType}}
            <div class="pill-lg texture type">
                <div class="gold-icon creature-type {{ class }}" style="background-image: url('{{ icon }}');"></div>
                <div class="name">
                    <span class="title">{{ localize title }}</span>
                    <span class="subtitle">{{ subtitle }}</span>
                </div>
                {{#if editable}}
                <a class="config-button" data-action="type" data-tooltip="DND5E.CreatureTypeConfig"
                   aria-label="{{ localize "DND5E.CreatureTypeConfig" }}">
                    <i class="fas fa-cog"></i>
                </a>
                {{/if}}
            </div>
            {{/with}}
            {{#if system.details.race}}
            <div class="pill-lg texture race" data-action="edit" data-item-id="{{ system.details.race.id }}"
                 aria-label="{{#if actor.isOwner}}{{ localize "DND5E.ItemEdit" }}{{else}}{{ localize "DND5E.ItemView" }}{{/if}}">
                {{#if system.details.race.img}}
                <img class="gold-icon" src="{{ system.details.race.img }}" alt="{{ system.details.race.name }}">
                {{/if}}
                <div class="name">
                    <span class="title">{{ system.details.race.name }}</span>
                    {{#if editable}}
                    <select class="actor-size unselect" name="system.traits.size">
                        {{ selectOptions config.actorSizes selected=source.traits.size }}
                    </select>
                    {{else}}
                    <span class="subtitle">{{ lookup config.actorSizes system.traits.size }}</span>
                    {{/if}}
                </div>
                {{#if editable}}
                <a class="item-control item-action" data-action="delete" data-tooltip="DND5E.ItemDelete"
                   aria-label="{{ localize "DND5E.ItemDelete" }}">
                    <i class="fas fa-trash"></i>
                </a>
                {{/if}}
            </div>
            {{/if}}
            {{#if system.details.background}}
            <div class="pill-lg texture background" data-action="edit" data-item-id="{{ system.details.background.id }}"
                 aria-label="{{#if actor.isOwner}}{{ localize "DND5E.ItemEdit" }}{{else}}{{ localize "DND5E.ItemView" }}{{/if}}">
                {{#if system.details.background.img}}
                <img class="gold-icon" src="{{ system.details.background.img }}"
                     alt="{{ system.details.background.name }}">
                {{/if}}
                <div class="name">
                    <span class="title">{{ system.details.background.name }}</span>
                </div>
                {{#if editable}}
                <a class="item-control item-action" data-action="delete" data-tooltip="DND5E.ItemDelete"
                   aria-label="{{ localize "DND5E.ItemDelete" }}">
                    <i class="fas fa-trash"></i>
                </a>
                {{/if}}
            </div>
            {{/if}}
        </div>

        {{!-- Saving Throws --}}
        <filigree-box class="saves">
            <h3>
                <i class="fas fa-shield-heart"></i>
                <span class="roboto-upper">{{ localize "DND5E.ClassSaves" }}</span>
            </h3>
            <ul>
                {{#each saves}}
                    {{> "ability-prof" path=(concat "system.abilities." @key)
                        config=(localize "DND5E.AbilityConfigure" ability=label) }}
                {{/each}}
            </ul>
        </filigree-box>

    </div>
</div>
